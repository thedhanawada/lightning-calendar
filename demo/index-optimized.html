<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Interactive demo for Lightning Calendar Core - A modern, lightweight calendar engine">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; font-src 'self' data:;">
    <title>Lightning Calendar Core - Interactive Console</title>

    <!-- Preload critical resources -->
    <link rel="preload" href="css/base.css" as="style">
    <link rel="preload" href="js/app.js" as="script" crossorigin>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/calendar.css">
    <link rel="stylesheet" href="css/console.css">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <h1>Lightning Calendar Core</h1>
            <nav>
                <a href="https://github.com/thedhanawada/lightning-calendar-core" target="_blank" rel="noopener">GitHub</a>
                <a href="https://github.com/thedhanawada/lightning-calendar-core/wiki" target="_blank" rel="noopener">Docs</a>
                <a href="demo.html">Full Demo</a>
                <a href="about.html">About</a>
            </nav>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Left Panel - Calendar -->
        <div class="left-panel">
            <!-- Calendar Controls -->
            <div class="calendar-controls">
                <div class="controls-row">
                    <div class="view-buttons">
                        <button data-view="month" class="active" aria-label="Month view">Month</button>
                        <button data-view="week" aria-label="Week view">Week</button>
                        <button data-view="day" aria-label="Day view">Day</button>
                        <button data-view="list" aria-label="List view">List</button>
                    </div>
                    <div class="timezone-selector">
                        <label for="timezone-select">Timezone:</label>
                        <select id="timezone-select" aria-label="Select timezone">
                            <!-- Australian Timezones -->
                            <optgroup label="Australia">
                                <option value="Australia/Sydney">Sydney (NSW/VIC/TAS)</option>
                                <option value="Australia/Melbourne">Melbourne (VIC)</option>
                                <option value="Australia/Brisbane">Brisbane (QLD)</option>
                                <option value="Australia/Adelaide">Adelaide (SA)</option>
                                <option value="Australia/Perth">Perth (WA)</option>
                                <option value="Australia/Hobart">Hobart (TAS)</option>
                                <option value="Australia/Darwin">Darwin (NT)</option>
                                <option value="Australia/Lord_Howe">Lord Howe Island</option>
                            </optgroup>
                            <!-- Key International -->
                            <optgroup label="International">
                                <option value="America/New_York">New York (EST/EDT)</option>
                                <option value="America/Los_Angeles">Los Angeles (PST/PDT)</option>
                                <option value="Europe/London">London (GMT/BST)</option>
                                <option value="Asia/Tokyo">Tokyo (JST)</option>
                                <option value="Asia/Singapore">Singapore (SGT)</option>
                                <option value="Pacific/Auckland">Auckland (NZST/NZDT)</option>
                                <option value="UTC">UTC</option>
                            </optgroup>
                        </select>
                    </div>
                </div>
                <div class="navigation-buttons">
                    <button id="prev-btn" aria-label="Previous">←</button>
                    <button id="today-btn" aria-label="Go to today">Today</button>
                    <button id="next-btn" aria-label="Next">→</button>
                </div>
            </div>

            <!-- Calendar Display -->
            <div class="calendar-content" id="calendar-display" role="main" aria-live="polite">
                <!-- Calendar renders here -->
            </div>

            <!-- Quick Add Form -->
            <div class="quick-add-form">
                <h3>Quick Add Event</h3>
                <form id="quick-add">
                    <div class="form-row">
                        <input type="text" id="title" placeholder="Event title" required aria-label="Event title">
                        <input type="datetime-local" id="start" required aria-label="Event start time">
                        <button type="submit">Add</button>
                    </div>
                    <div class="form-note">
                        Note: Event will be added in the selected timezone
                    </div>
                </form>
            </div>

            <!-- Stats Bar -->
            <div class="stats-bar">
                <div class="stat">
                    <span class="stat-label">Events:</span>
                    <span class="stat-value" id="total-events">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">View:</span>
                    <span class="stat-value" id="current-view">Month</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Timezone:</span>
                    <span class="stat-value" id="current-timezone">Australia/Sydney</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Cache Hits:</span>
                    <span class="stat-value" id="cache-hits">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Undo Stack:</span>
                    <span class="stat-value" id="undo-count">0</span>
                </div>
            </div>
        </div>

        <!-- Right Panel - Console -->
        <div class="right-panel" id="console-panel">
            <div class="console-header">
                <span class="console-title">Interactive Console</span>
                <span class="console-status" id="console-status">● Connected</span>
            </div>

            <div class="console-body">
                <!-- Console Output -->
                <div class="console-output" id="console-output" role="log" aria-label="Console output">
                    <div class="console-entry system">// Lightning Calendar Core Console v1.0</div>
                    <div class="console-entry system">// Safe command execution enabled (no eval)</div>
                    <div class="console-entry system">// Type "help()" for available commands</div>
                </div>

                <!-- Quick Commands -->
                <div class="quick-commands">
                    <div class="quick-commands-title">Quick Commands - Click to Execute</div>

                    <!-- Basic Operations -->
                    <div class="command-section">
                        <div class="command-section-title">Basic</div>
                        <div class="command-buttons">
                            <button class="command-btn category-query" data-command="calendar.getEvents()">Get Events</button>
                            <button class="command-btn category-query" data-command="calendar.getEventsForDate(new Date())">Today's Events</button>
                            <button class="command-btn category-modify" data-command='calendar.addEvent({ id: Date.now().toString(), title: "New Event", start: new Date(Date.now() + 3600000), end: new Date(Date.now() + 7200000) })'>Add Event</button>
                            <button class="command-btn category-modify" data-command="calendar.eventStore.clear()">Clear All</button>
                        </div>
                    </div>

                    <!-- View Controls -->
                    <div class="command-section">
                        <div class="command-section-title">Views</div>
                        <div class="command-buttons">
                            <button class="command-btn category-modify" data-command="calendar.setView('month')">Month</button>
                            <button class="command-btn category-modify" data-command="calendar.setView('week')">Week</button>
                            <button class="command-btn category-modify" data-command="calendar.setView('day')">Day</button>
                            <button class="command-btn category-modify" data-command="calendar.today()">Today</button>
                            <button class="command-btn category-modify" data-command="calendar.next()">Next</button>
                            <button class="command-btn category-modify" data-command="calendar.previous()">Previous</button>
                        </div>
                    </div>

                    <!-- Advanced -->
                    <div class="command-section">
                        <div class="command-section-title">Advanced</div>
                        <div class="command-buttons">
                            <button class="command-btn category-info" data-command="calendar.eventStore.getStats()">Stats</button>
                            <button class="command-btn category-modify" data-command="calendar.state.undo()">Undo</button>
                            <button class="command-btn category-modify" data-command="calendar.state.redo()">Redo</button>
                            <button class="command-btn category-info" data-command="calendar.eventStore.getPerformanceMetrics()">Performance</button>
                            <button class="command-btn category-query" data-command='calendar.getEventsInRange(new Date(), new Date(Date.now() + 7 * 86400000))'>Next 7 Days</button>
                            <button class="command-btn category-info" data-command="help()">Help</button>
                        </div>
                    </div>
                </div>

                <!-- Console Input -->
                <div class="console-input-area">
                    <input type="text"
                           id="console-input"
                           class="console-input"
                           placeholder="Type JavaScript code... (e.g., calendar.getEvents())"
                           autocomplete="off"
                           aria-label="Console input">
                    <button id="console-run" class="console-run">Run</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile Console Toggle -->
    <button class="toggle-console" id="toggle-console" aria-label="Toggle console">Show Console</button>

    <!-- Load the application -->
    <script type="module" src="js/app.js"></script>

    <!-- No-script fallback -->
    <noscript>
        <div style="padding: 20px; background: #fff3cd; color: #856404; text-align: center;">
            JavaScript is required to run the Lightning Calendar Core demo.
        </div>
    </noscript>
</body>
</html>